{"ast":null,"code":"import { parseDef } from \"./parseDef.js\";\nimport { getRefs } from \"./Refs.js\";\nimport { parseAnyDef } from \"./parsers/any.js\";\nconst zodToJsonSchema = (schema, options) => {\n  const refs = getRefs(options);\n  let definitions = typeof options === \"object\" && options.definitions ? Object.entries(options.definitions).reduce((acc, [name, schema]) => ({\n    ...acc,\n    [name]: parseDef(schema._def, {\n      ...refs,\n      currentPath: [...refs.basePath, refs.definitionPath, name]\n    }, true) ?? parseAnyDef(refs)\n  }), {}) : undefined;\n  const name = typeof options === \"string\" ? options : options?.nameStrategy === \"title\" ? undefined : options?.name;\n  const main = parseDef(schema._def, name === undefined ? refs : {\n    ...refs,\n    currentPath: [...refs.basePath, refs.definitionPath, name]\n  }, false) ?? parseAnyDef(refs);\n  const title = typeof options === \"object\" && options.name !== undefined && options.nameStrategy === \"title\" ? options.name : undefined;\n  if (title !== undefined) {\n    main.title = title;\n  }\n  if (refs.flags.hasReferencedOpenAiAnyType) {\n    if (!definitions) {\n      definitions = {};\n    }\n    if (!definitions[refs.openAiAnyTypeName]) {\n      definitions[refs.openAiAnyTypeName] = {\n        // Skipping \"object\" as no properties can be defined and additionalProperties must be \"false\"\n        type: [\"string\", \"number\", \"integer\", \"boolean\", \"array\", \"null\"],\n        items: {\n          $ref: refs.$refStrategy === \"relative\" ? \"1\" : [...refs.basePath, refs.definitionPath, refs.openAiAnyTypeName].join(\"/\")\n        }\n      };\n    }\n  }\n  const combined = name === undefined ? definitions ? {\n    ...main,\n    [refs.definitionPath]: definitions\n  } : main : {\n    $ref: [...(refs.$refStrategy === \"relative\" ? [] : refs.basePath), refs.definitionPath, name].join(\"/\"),\n    [refs.definitionPath]: {\n      ...definitions,\n      [name]: main\n    }\n  };\n  if (refs.target === \"jsonSchema7\") {\n    combined.$schema = \"http://json-schema.org/draft-07/schema#\";\n  } else if (refs.target === \"jsonSchema2019-09\" || refs.target === \"openAi\") {\n    combined.$schema = \"https://json-schema.org/draft/2019-09/schema#\";\n  }\n  if (refs.target === \"openAi\" && (\"anyOf\" in combined || \"oneOf\" in combined || \"allOf\" in combined || \"type\" in combined && Array.isArray(combined.type))) {\n    console.warn(\"Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property.\");\n  }\n  return combined;\n};\nexport { zodToJsonSchema };","map":{"version":3,"names":["parseDef","getRefs","parseAnyDef","zodToJsonSchema","schema","options","refs","definitions","Object","entries","reduce","acc","name","_def","currentPath","basePath","definitionPath","undefined","nameStrategy","main","title","flags","hasReferencedOpenAiAnyType","openAiAnyTypeName","type","items","$ref","$refStrategy","join","combined","target","$schema","Array","isArray","console","warn"],"sources":["/Users/chetan/Desktop/summarize_agent/frontend/node_modules/zod-to-json-schema/dist/esm/zodToJsonSchema.js"],"sourcesContent":["import { parseDef } from \"./parseDef.js\";\nimport { getRefs } from \"./Refs.js\";\nimport { parseAnyDef } from \"./parsers/any.js\";\nconst zodToJsonSchema = (schema, options) => {\n    const refs = getRefs(options);\n    let definitions = typeof options === \"object\" && options.definitions\n        ? Object.entries(options.definitions).reduce((acc, [name, schema]) => ({\n            ...acc,\n            [name]: parseDef(schema._def, {\n                ...refs,\n                currentPath: [...refs.basePath, refs.definitionPath, name],\n            }, true) ?? parseAnyDef(refs),\n        }), {})\n        : undefined;\n    const name = typeof options === \"string\"\n        ? options\n        : options?.nameStrategy === \"title\"\n            ? undefined\n            : options?.name;\n    const main = parseDef(schema._def, name === undefined\n        ? refs\n        : {\n            ...refs,\n            currentPath: [...refs.basePath, refs.definitionPath, name],\n        }, false) ?? parseAnyDef(refs);\n    const title = typeof options === \"object\" &&\n        options.name !== undefined &&\n        options.nameStrategy === \"title\"\n        ? options.name\n        : undefined;\n    if (title !== undefined) {\n        main.title = title;\n    }\n    if (refs.flags.hasReferencedOpenAiAnyType) {\n        if (!definitions) {\n            definitions = {};\n        }\n        if (!definitions[refs.openAiAnyTypeName]) {\n            definitions[refs.openAiAnyTypeName] = {\n                // Skipping \"object\" as no properties can be defined and additionalProperties must be \"false\"\n                type: [\"string\", \"number\", \"integer\", \"boolean\", \"array\", \"null\"],\n                items: {\n                    $ref: refs.$refStrategy === \"relative\"\n                        ? \"1\"\n                        : [\n                            ...refs.basePath,\n                            refs.definitionPath,\n                            refs.openAiAnyTypeName,\n                        ].join(\"/\"),\n                },\n            };\n        }\n    }\n    const combined = name === undefined\n        ? definitions\n            ? {\n                ...main,\n                [refs.definitionPath]: definitions,\n            }\n            : main\n        : {\n            $ref: [\n                ...(refs.$refStrategy === \"relative\" ? [] : refs.basePath),\n                refs.definitionPath,\n                name,\n            ].join(\"/\"),\n            [refs.definitionPath]: {\n                ...definitions,\n                [name]: main,\n            },\n        };\n    if (refs.target === \"jsonSchema7\") {\n        combined.$schema = \"http://json-schema.org/draft-07/schema#\";\n    }\n    else if (refs.target === \"jsonSchema2019-09\" || refs.target === \"openAi\") {\n        combined.$schema = \"https://json-schema.org/draft/2019-09/schema#\";\n    }\n    if (refs.target === \"openAi\" &&\n        (\"anyOf\" in combined ||\n            \"oneOf\" in combined ||\n            \"allOf\" in combined ||\n            (\"type\" in combined && Array.isArray(combined.type)))) {\n        console.warn(\"Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property.\");\n    }\n    return combined;\n};\nexport { zodToJsonSchema };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}