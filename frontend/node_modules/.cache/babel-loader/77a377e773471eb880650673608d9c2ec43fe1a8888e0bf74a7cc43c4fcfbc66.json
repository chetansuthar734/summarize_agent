{"ast":null,"code":"import { parseDef } from \"../parseDef.js\";\nexport function parseObjectDef(def, refs) {\n  const forceOptionalIntoNullable = refs.target === \"openAi\";\n  const result = {\n    type: \"object\",\n    properties: {}\n  };\n  const required = [];\n  const shape = def.shape();\n  for (const propName in shape) {\n    let propDef = shape[propName];\n    if (propDef === undefined || propDef._def === undefined) {\n      continue;\n    }\n    let propOptional = safeIsOptional(propDef);\n    if (propOptional && forceOptionalIntoNullable) {\n      if (propDef._def.typeName === \"ZodOptional\") {\n        propDef = propDef._def.innerType;\n      }\n      if (!propDef.isNullable()) {\n        propDef = propDef.nullable();\n      }\n      propOptional = false;\n    }\n    const parsedDef = parseDef(propDef._def, {\n      ...refs,\n      currentPath: [...refs.currentPath, \"properties\", propName],\n      propertyPath: [...refs.currentPath, \"properties\", propName]\n    });\n    if (parsedDef === undefined) {\n      continue;\n    }\n    result.properties[propName] = parsedDef;\n    if (!propOptional) {\n      required.push(propName);\n    }\n  }\n  if (required.length) {\n    result.required = required;\n  }\n  const additionalProperties = decideAdditionalProperties(def, refs);\n  if (additionalProperties !== undefined) {\n    result.additionalProperties = additionalProperties;\n  }\n  return result;\n}\nfunction decideAdditionalProperties(def, refs) {\n  if (def.catchall._def.typeName !== \"ZodNever\") {\n    return parseDef(def.catchall._def, {\n      ...refs,\n      currentPath: [...refs.currentPath, \"additionalProperties\"]\n    });\n  }\n  switch (def.unknownKeys) {\n    case \"passthrough\":\n      return refs.allowedAdditionalProperties;\n    case \"strict\":\n      return refs.rejectedAdditionalProperties;\n    case \"strip\":\n      return refs.removeAdditionalStrategy === \"strict\" ? refs.allowedAdditionalProperties : refs.rejectedAdditionalProperties;\n  }\n}\nfunction safeIsOptional(schema) {\n  try {\n    return schema.isOptional();\n  } catch {\n    return true;\n  }\n}","map":{"version":3,"names":["parseDef","parseObjectDef","def","refs","forceOptionalIntoNullable","target","result","type","properties","required","shape","propName","propDef","undefined","_def","propOptional","safeIsOptional","typeName","innerType","isNullable","nullable","parsedDef","currentPath","propertyPath","push","length","additionalProperties","decideAdditionalProperties","catchall","unknownKeys","allowedAdditionalProperties","rejectedAdditionalProperties","removeAdditionalStrategy","schema","isOptional"],"sources":["/Users/chetan/Desktop/summarize_agent/frontend/node_modules/zod-to-json-schema/dist/esm/parsers/object.js"],"sourcesContent":["import { parseDef } from \"../parseDef.js\";\nexport function parseObjectDef(def, refs) {\n    const forceOptionalIntoNullable = refs.target === \"openAi\";\n    const result = {\n        type: \"object\",\n        properties: {},\n    };\n    const required = [];\n    const shape = def.shape();\n    for (const propName in shape) {\n        let propDef = shape[propName];\n        if (propDef === undefined || propDef._def === undefined) {\n            continue;\n        }\n        let propOptional = safeIsOptional(propDef);\n        if (propOptional && forceOptionalIntoNullable) {\n            if (propDef._def.typeName === \"ZodOptional\") {\n                propDef = propDef._def.innerType;\n            }\n            if (!propDef.isNullable()) {\n                propDef = propDef.nullable();\n            }\n            propOptional = false;\n        }\n        const parsedDef = parseDef(propDef._def, {\n            ...refs,\n            currentPath: [...refs.currentPath, \"properties\", propName],\n            propertyPath: [...refs.currentPath, \"properties\", propName],\n        });\n        if (parsedDef === undefined) {\n            continue;\n        }\n        result.properties[propName] = parsedDef;\n        if (!propOptional) {\n            required.push(propName);\n        }\n    }\n    if (required.length) {\n        result.required = required;\n    }\n    const additionalProperties = decideAdditionalProperties(def, refs);\n    if (additionalProperties !== undefined) {\n        result.additionalProperties = additionalProperties;\n    }\n    return result;\n}\nfunction decideAdditionalProperties(def, refs) {\n    if (def.catchall._def.typeName !== \"ZodNever\") {\n        return parseDef(def.catchall._def, {\n            ...refs,\n            currentPath: [...refs.currentPath, \"additionalProperties\"],\n        });\n    }\n    switch (def.unknownKeys) {\n        case \"passthrough\":\n            return refs.allowedAdditionalProperties;\n        case \"strict\":\n            return refs.rejectedAdditionalProperties;\n        case \"strip\":\n            return refs.removeAdditionalStrategy === \"strict\"\n                ? refs.allowedAdditionalProperties\n                : refs.rejectedAdditionalProperties;\n    }\n}\nfunction safeIsOptional(schema) {\n    try {\n        return schema.isOptional();\n    }\n    catch {\n        return true;\n    }\n}\n"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,gBAAgB;AACzC,OAAO,SAASC,cAAcA,CAACC,GAAG,EAAEC,IAAI,EAAE;EACtC,MAAMC,yBAAyB,GAAGD,IAAI,CAACE,MAAM,KAAK,QAAQ;EAC1D,MAAMC,MAAM,GAAG;IACXC,IAAI,EAAE,QAAQ;IACdC,UAAU,EAAE,CAAC;EACjB,CAAC;EACD,MAAMC,QAAQ,GAAG,EAAE;EACnB,MAAMC,KAAK,GAAGR,GAAG,CAACQ,KAAK,CAAC,CAAC;EACzB,KAAK,MAAMC,QAAQ,IAAID,KAAK,EAAE;IAC1B,IAAIE,OAAO,GAAGF,KAAK,CAACC,QAAQ,CAAC;IAC7B,IAAIC,OAAO,KAAKC,SAAS,IAAID,OAAO,CAACE,IAAI,KAAKD,SAAS,EAAE;MACrD;IACJ;IACA,IAAIE,YAAY,GAAGC,cAAc,CAACJ,OAAO,CAAC;IAC1C,IAAIG,YAAY,IAAIX,yBAAyB,EAAE;MAC3C,IAAIQ,OAAO,CAACE,IAAI,CAACG,QAAQ,KAAK,aAAa,EAAE;QACzCL,OAAO,GAAGA,OAAO,CAACE,IAAI,CAACI,SAAS;MACpC;MACA,IAAI,CAACN,OAAO,CAACO,UAAU,CAAC,CAAC,EAAE;QACvBP,OAAO,GAAGA,OAAO,CAACQ,QAAQ,CAAC,CAAC;MAChC;MACAL,YAAY,GAAG,KAAK;IACxB;IACA,MAAMM,SAAS,GAAGrB,QAAQ,CAACY,OAAO,CAACE,IAAI,EAAE;MACrC,GAAGX,IAAI;MACPmB,WAAW,EAAE,CAAC,GAAGnB,IAAI,CAACmB,WAAW,EAAE,YAAY,EAAEX,QAAQ,CAAC;MAC1DY,YAAY,EAAE,CAAC,GAAGpB,IAAI,CAACmB,WAAW,EAAE,YAAY,EAAEX,QAAQ;IAC9D,CAAC,CAAC;IACF,IAAIU,SAAS,KAAKR,SAAS,EAAE;MACzB;IACJ;IACAP,MAAM,CAACE,UAAU,CAACG,QAAQ,CAAC,GAAGU,SAAS;IACvC,IAAI,CAACN,YAAY,EAAE;MACfN,QAAQ,CAACe,IAAI,CAACb,QAAQ,CAAC;IAC3B;EACJ;EACA,IAAIF,QAAQ,CAACgB,MAAM,EAAE;IACjBnB,MAAM,CAACG,QAAQ,GAAGA,QAAQ;EAC9B;EACA,MAAMiB,oBAAoB,GAAGC,0BAA0B,CAACzB,GAAG,EAAEC,IAAI,CAAC;EAClE,IAAIuB,oBAAoB,KAAKb,SAAS,EAAE;IACpCP,MAAM,CAACoB,oBAAoB,GAAGA,oBAAoB;EACtD;EACA,OAAOpB,MAAM;AACjB;AACA,SAASqB,0BAA0BA,CAACzB,GAAG,EAAEC,IAAI,EAAE;EAC3C,IAAID,GAAG,CAAC0B,QAAQ,CAACd,IAAI,CAACG,QAAQ,KAAK,UAAU,EAAE;IAC3C,OAAOjB,QAAQ,CAACE,GAAG,CAAC0B,QAAQ,CAACd,IAAI,EAAE;MAC/B,GAAGX,IAAI;MACPmB,WAAW,EAAE,CAAC,GAAGnB,IAAI,CAACmB,WAAW,EAAE,sBAAsB;IAC7D,CAAC,CAAC;EACN;EACA,QAAQpB,GAAG,CAAC2B,WAAW;IACnB,KAAK,aAAa;MACd,OAAO1B,IAAI,CAAC2B,2BAA2B;IAC3C,KAAK,QAAQ;MACT,OAAO3B,IAAI,CAAC4B,4BAA4B;IAC5C,KAAK,OAAO;MACR,OAAO5B,IAAI,CAAC6B,wBAAwB,KAAK,QAAQ,GAC3C7B,IAAI,CAAC2B,2BAA2B,GAChC3B,IAAI,CAAC4B,4BAA4B;EAC/C;AACJ;AACA,SAASf,cAAcA,CAACiB,MAAM,EAAE;EAC5B,IAAI;IACA,OAAOA,MAAM,CAACC,UAAU,CAAC,CAAC;EAC9B,CAAC,CACD,MAAM;IACF,OAAO,IAAI;EACf;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}